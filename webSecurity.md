# Web Security

## owasp账号密码

root owaspbwa

## sublime text使用vim

```bash
sublime ->preference->seting 添加修改
{
    "caret_extra_bottom": 1,
    "caret_extra_top": 1,
    "caret_extra_width": 2,
    "font_size": 11,
    "ignored_packages":
    [
    ],
    "vintage_ctrl_keys": true,
    "vintage_start_in_command_mode": true
}

```

## javascript

一般引用放在html文档<body>底部，因为执行是顺序执行。如果在最前面，会出现alert时不点确定。剩下的不加载的情况。

# 工具

apt-get 必须加sudo

换源：

```bash
# 首先切换到root:     
su - root
# 打开sources.list 文件编辑     
vim /etc/apt/sources.list
# 原来的源 注释  即deb http://http.kali.org/kali kali-rolling main contrib non-free

# 中科大
# deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib
# deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib

# 阿里云
# deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib
# deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib

# 清华大学
# deb http://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free
# deb-src https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free

# 注: 在kali终端，使用鼠标选中内容，就可以完成复制;
#     移动光标需要粘贴的位置，按下鼠标中间的滚轮就可以粘贴;
#     deb 代表软件的位置，deb-src 代表软件的源代码的位置

# 从/etc/apt/sources.list 文件中定义的源中获取的最新的如那件包列表，即没有更新软件，而是相当于windows下面的检查更新，获取的是软件的状态
apt update
```

https://www.cnblogs.com/u-damowang1/p/14729017.html

## dnsutils

```bash
# 安装
sudo apt-get install dnsutils
# 使用
nslookup google.com # 查看google的地址
```

## burpsuite

```bash
#设置代理时
```

![image-20220214104217481](/Volumes/移动硬盘/文稿/pictures/image-20220214104217481.png)![image-20220214104337578](/Volumes/移动硬盘/文稿/pictures/image-20220214104337578.png)![image-20220214104431364](/Volumes/移动硬盘/文稿/pictures/image-20220214104431364.png)![image-20220214104515965](/Volumes/移动硬盘/文稿/pictures/image-20220214104515965.png)

http://burp/

![image-20220214104557074](/Volumes/移动硬盘/文稿/pictures/image-20220214104557074.png)![image-20220214104657342](/Volumes/移动硬盘/文稿/pictures/image-20220214104657342.png)![image-20220214104724885](/Volumes/移动硬盘/文稿/pictures/image-20220214104724885.png)

![image-20220214104816362](/Volumes/移动硬盘/文稿/pictures/image-20220214104816362.png)![image-20220214104841838](/Volumes/移动硬盘/文稿/pictures/image-20220214104841838.png)

之后一直点OK就可以了

![image-20220214113001385](/Volumes/移动硬盘/文稿/pictures/image-20220214113001385.png)  

## repeater

截取单独的一个包出来操作

## intruder

选取不同的排列列表，进行暴力破解



# 命令

```bash
host google.com # 查看google的地址
sudo netdiscover # 查看本地网络中有多少连接
```

## get information 

```bash
# 扫描，netdiscover
```

```bash
# 1. ping
┌──(parallels㉿kali-linux-2021-3)-[~]
└─$ ping www.baidu.com
PING www.a.shifen.com (110.242.68.4) 56(84) bytes of data.
64 bytes from 110.242.68.4 (110.242.68.4): icmp_seq=1 ttl=48 time=13.9 ms
# 2. host                                                                                                              
┌──(parallels㉿kali-linux-2021-3)-[~]
└─$ host www.baidu.com
www.baidu.com is an alias for www.a.shifen.com.
www.a.shifen.com has address 110.242.68.3
www.a.shifen.com has address 110.242.68.4
# 3. nslookup
┌──(parallels㉿kali-linux-2021-3)-[~]
└─$ nslookup facebook.com                                                                                    1 ⨯
Server:         192.168.10.1
Address:        192.168.10.1#53

Non-authoritative answer:
Name:   facebook.com
Address: 199.96.58.85
Name:   facebook.com
Address: 2001::6ca0:a5d4
# 4. whois  get email, phone number, name ... 
┌──(parallels㉿kali-linux-2021-3)-[~]
└─$ whois tesla.com                                                               
   Domain Name: TESLA.COM
   Registry Domain ID: 187902_DOMAIN_COM-VRSN
   Registrar WHOIS Server: whois.markmonitor.com
   Registrar URL: http://www.markmonitor.com
   Updated Date: 2020-10-02T09:07:57Z
   Creation Date: 1992-11-04T05:00:00Z
   Registry Expiry Date: 2022-11-03T05:00:00Z
   ...

# 5. 第三方网站。可以避免被跟踪到在查询信息
# 比如 https://site.ip138.com/f7r.cn/
```

## whatweb

**不要使用默认（passive）以上的模式去扫瞄其它网站，在没有授权的情况下。**

```bash
# 1. get help
whatweb --help # abstract help
man whatweb   # detaile help

# 2. over errors
whatweb --agrression 3 ip --no-errors # 3级入侵，不报错

* Scan the local network quickly and suppress errors.
  whatweb --no-errors 192.168.0.0/24

* Scan the local network for https websites.
  whatweb --no-errors --url-prefix https:// 192.168.0.0/24

```

## dirb

根据字典去扫描网站

默认字典位置/usr/share/wordlists/dirb

```bash
# 1. for help
┌──(parallels㉿kali-linux-2021-3)-[~]
└─$ dirb    

-----------------
DIRB v2.22    
By The Dark Raver
-----------------

dirb <url_base> [<wordlist_file(s)>] [options]

========================= NOTES =========================
 <url_base> : Base URL to scan. (Use -resume for session resuming)
 <wordlist_file(s)> : List of wordfiles. (wordfile1,wordfile2,wordfile3...)

======================== HOTKEYS ========================
 'n' -> Go to next directory.
 'q' -> Stop scan. (Saving state for resume)
 'r' -> Remaining scan stats.

======================== OPTIONS ========================
...

# 2. right use

$ dirb 192.168.10.12 [字典]                                                                               255 ⨯

-----------------
DIRB v2.22    
By The Dark Raver
-----------------


(!) FATAL: Invalid URL format: 192.168.10.12/
    (Use: "http://host/" or "https://host/" for SSL)
                                                                                                                 

$ dirb http://192.168.10.12                                                                              255 ⨯

-----------------
DIRB v2.22    
By The Dark Raver
...
+ http://192.168.10.12/gallery2/embed (CODE:200|SIZE:0) # CODE:200 表示成功
```

## namp

```bash
─$ nmap -sV 192.168.31.59 #-sV 显示端口运行的内容
PORT     STATE SERVICE     VERSION
22/tcp   open  ssh         OpenSSH 5.3p1 Debian 3ubuntu4 (Ubuntu Linux; protocol 2.0)
80/tcp   open  http        Apache httpd 2.2.14 ((Ubuntu) mod_mono/2.4.3 PHP/5.3.2-1ubuntu4.30 with Suhosin-Patch proxy_html/3.0.1 mod_python/3.3.1 Python/2.6.5 mod_ssl/2.2.14 OpenSSL...)
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
143/tcp  open  imap        Courier Imapd (released 2008)
443/tcp  open  ssl/http    Apache httpd 2.2.14 ((Ubuntu) mod_mono/2.4.3 PHP/5.3.2-1ubuntu4.30 with Suhosin-Patch proxy_html/3.0.1 mod_python/3.3.1 Python/2.6.5 mod_ssl/2.2.14 OpenSSL...)
445/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
5001/tcp open  java-object Java Object Serialization
8080/tcp open  http        Apache Tomcat/Coyote JSP engine 1.1
8081/tcp open  http        Jetty 6.1.25
-$ nmap --script vuln 192.168.31.59 # 显示工具找到的漏洞
# 按>可以查看进度
```

## nikto

```bash
$- nikto                           
- Nikto v2.1.6
---------------------------------------------------------------------------
+ ERROR: No host or URL specified

       -config+            Use this config file
       -Display+           Turn on/off display outputs
       -dbcheck            check database and other key files for syntax errors
       -Format+            save file (-o) format
       -Help               Extended help information
       -host+              target host/URL
       -id+                Host authentication to use, format is id:pass or id:pass:realm
       -list-plugins       List all available plugins
       -output+            Write output to this file
       -nossl              Disables using SSL
       -no404              Disables 404 checks
       -Plugins+           List of plugins to run (default: ALL)
       -port+              Port to use (default 80)
       -root+              Prepend root value to all requests, format is /directory
       -ssl                Force ssl mode on port
       -Tuning+            Scan tuning
       -timeout+           Timeout for requests (default 10 seconds)
       -update             Update databases and plugins from CIRT.net
       -Version            Print plugin and database versions
       -vhost+             Virtual host (for Host header)
                + requires a value

        Note: This is the short help output. Use -H for full help text.
└─$ nikto -host 192.168.31.59
---------------------------------------------------------------------------
+ Target IP:          192.168.31.59
+ Target Hostname:    192.168.31.59
+ Target Port:        80
+ Start Time:         2022-02-14 09:51:19 (GMT8)
---------------------------------------------------------------------------
+ Server: Apache/2.2.14 (Ubuntu) mod_mono/2.4.3 PHP/5.3.2-1ubuntu4.30 with Suhosin-Patch proxy_html/3.0.1 mod_python/3.3.1 Python/2.6.5 mod_ssl/2.2.14 OpenSSL/0.9.8k Phusion_Passenger/4.0.38 mod_perl/2.0.4 Perl/v5.10.1
+ Server may leak inodes via ETags, header found with file /, inode: 286483, size: 28067, mtime: Fri Jul 31 10:55:52 2015
+ The anti-clickjacking X-Frame-Options header is not present.
+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS
+ The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type
+ OSVDB-3268: /cgi-bin/: Directory indexing found.
+ /crossdomain.xml contains a full wildcard entry. See http://jeremiahgrossman.blogspot.com/2008/05/crossdomainxml-invites-cross-site.html
+ Uncommon header 'tcn' found, with contents: list
+ Apache mod_negotiation is enabled with MultiViews, which allows attackers to easily brute force file names. See http://www.wisec.it/sectou.php?id=4698ebdc59d15. The following alternatives for 'index' were found: index.css, index.html
+ mod_mono/2.4.3 appears to be outdated (current is at least 2.8)
+ PHP/5.3.2-1ubuntu4.30 appears to be outdated (current is at least 7.2.12). PHP 5.6.33, 7.0.27, 7.1.13, 7.2.1 may also current release for each branch.
# 
└─$ nikto -host 192.168.31.59 -port 8081# 8081是另一个端口，在nmap时找到的
- Nikto v2.1.6
---------------------------------------------------------------------------
+ Target IP:          192.168.31.59
+ Target Hostname:    192.168.31.59
+ Target Port:        8081
+ Start Time:         2022-02-14 09:56:22 (GMT8)
---------------------------------------------------------------------------
+ Server: Jetty(6.1.25)
+ The anti-clickjacking X-Frame-Options header is not present.
+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS
+ The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type
+ No CGI Directories found (use '-C all' to force check all possible dirs)
+ Jetty/6.1.25 appears to be outdated (current is at least 9.3.6.v20151106). Jetty 9.2.14.v20151106, 8.1.17.v20150415 and 7.6.17.v20150415 are also current.
+ Allowed HTTP Methods: GET, HEAD, POST, TRACE, OPTIONS 
+ OSVDB-3092: /admin/: This might be interesting...
+ OSVDB-3092: /css/: This might be interesting...
+ /admin/index.html: Admin login page/section found.
+ ERROR: Error limit (20) reached for host, giving up. Last error: 
+ Scan terminated:  0 error(s) and 8 item(s) reported on remote host
+ End Time:           2022-02-14 09:59:02 (GMT8) (160 seconds)
---------------------------------------------------------------------------
+ 1 host(s) tested
```





# kail开启ssh

需要编辑的是t文件

```bash
# 1. #PasswordAuthentication no的注释去掉，并且将NO修改为YES //kali中默认是yes
# 2. PermitRootLogin without-password修改为PermitRootLogin yes
# 3. 启动ssh
/etc/init.d/ssh start 
# 检查ssh是否成功
/etc/init.d/ssh status
# 重启ssh
service ssh restart
# 开机启动ssh(root)
update-rc.d ssh enable
# 关闭开机启动
update-rc.d ssh disabled
# 4. 使用用户名和密码进行登录
```

## github

.gitignore文件中写入文件全名，可以ignore一些文件。

`git remote -v` 可以查看原创仓库属性。
